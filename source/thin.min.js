function poplayer(t){var e=document.createElement("popmask");e.style="display:block;position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0,0,0,.6);overflow:hidden;",e.style.zIndex=1e3;var a=document.createElement("popdialog");if(a.style="display:block;width:40%;position:relative;margin:10% auto 0;border-radius:4px;background:#fff;line-height:24px;overflow:hidden;",void 0!==t.width&&(a.style.width=t.width),void 0!==t.height&&(a.style.height=t.height),e.appendChild(a),void 0!==t.header){var n=document.createElement("popheader");n.style="display:block;background-color: #81c5ba;padding:0 10px;color:#fff;position:relative;height:50px;line-height:50px;vertical-align:middle;font-size:16px;font-weight:bold;",$(n).html(t.header);var o=document.createElement("span");o.innerText="âœ•",o.style="position:absolute;right:10px;top:0;cursor:pointer; color: #000;text-shadow: 0 1px 0 #fff;filter: alpha(opacity=50);opacity: .5;",o.onclick=function(){void 0!==t.onclose&&t.onclose(),$(e).remove()},o.onmouseover=function(){this.style.filter="alpha(opacity=80)",this.style.opacity=".8"},o.onmouseout=function(){this.style.filter="alpha(opacity=50)",this.style.opacity=".5"},n.appendChild(o),a.appendChild(n)}var i=document.createElement("popbody");i.style="display:block;padding:5px 10px;",a.appendChild(i),document.body.appendChild(e),void 0!==t.render?t.render({container:i}):$(i).render({data:t.data,template:t.template})}$(function(){$(document).on("click","tab-nav",function(){$("tab-nav",this.parentElement).removeClass("active"),$(this).addClass("active");var t=this.getAttribute("function");null===t||"[object Function]"===Object.prototype.toString.call(window[t])&&window[t]();var e=this.getAttribute("view");if(null!==e){var a=$(this).parents("multiview");$("view",a).removeClass("active"),$("view#"+e,a).addClass("active")}})}),$.fn.extend({render:function(t){function e(t){if("[object Array]"===Object.prototype.toString.call(t.data))for(var e=0;e<t.data.length;e++)a({container:t.container,template:t.template,data:t.data[e]});else a({container:t.container,template:t.template,data:t.data})}function a(t){if("[object Array]"===Object.prototype.toString.call(t.template))for(var e=0;e<t.template.length;e++)n({template:t.template[e],container:t.container,data:t.data});else n({template:t.template,container:t.container,data:t.data})}function n(t){if("[object String]"===Object.prototype.toString.call(t.template)){var e=i({template:t.template,container:t.container}),a=document.createDocumentFragment();$(a).append(e),t.container.appendChild(a)}else if("[object Object]"===Object.prototype.toString.call(t.template))o({container:t.container,template:t.template,data:t.data});else if("[object Function]"===Object.prototype.toString.call(t.template)){var n=l(t.container);t.template({container:t.container,data:n.data_of_thin})}else console.log(Object.prototype.toString.call(t.template))}function o(t){if(void 0!==t.template.datapath&&void 0===t.data){var n=r({container:t.container,path:t.template.datapath});null!==n&&e({container:t.container,data:n,template:t.template})}else{var o;if(o=void 0!==t.template.e?document.createElement(t.template.e):document.createElement("div"),$(t.container).append(o),void 0!==t.data&&(o.data_of_thin=t.data),void 0!==t.template.name&&o.setAttribute("name",t.template.name),void 0!==t.template.options)if("[object Array]"===Object.prototype.toString.call(t.template.options))for(var p=0;p<t.template.options.length;p++)o.options.add(new Option(t.template.options[p]));else if("[object Object]"===Object.prototype.toString.call(t.template.options));else if("[object String]"===Object.prototype.toString.call(t.template.options))for(var c=t.template.options.split(","),d=0;d<c.length;d++)o.options.add(new Option(c[d]));if(void 0!==t.template.selected){var s=i({template:t.template.selected,container:o});$(o).val(s)}void 0!==t.template.click&&(o.onclick=function(){var e=l(this),a={};$("input",e).each(function(t,e){var n=this.attributes.name.value;a[n]=$(this).val()}),$("select",e).each(function(t,e){var n=this.attributes.name.value;a[n]=$(this).val()}),t.template.click({sender:this,org_data:e.data_of_thin,new_data:a})}),void 0!==t.template.event&&Object.keys(t.template.event).forEach(function(e){$(o).on(e,function(e){var a=l(this),n=new Object;$("input",a).each(function(t,e){var a=this.attributes.name.value;n[a]=$(this).val()}),$("select",a).each(function(t,e){var a=this.attributes.name.value;n[a]=$(this).val()});var o=e.type;t.template.event[o]({sender:this,type:o,event:e,org_data:a.data_of_thin,new_data:n})})}),void 0!==t.template.t&&a({container:o,template:t.template.t}),void 0!==t.template.a&&Object.keys(t.template.a).forEach(function(e){if("[object Function]"===Object.prototype.toString.call(t.template.a[e])){var a=l(o);o.setAttribute(e,t.template.a[e]({container:o,data:a.data_of_thin}))}else o.setAttribute(e,i({template:t.template.a[e],container:o}))}),void 0!==t.template.style&&Object.keys(t.template.style).forEach(function(e){if("[object Function]"===Object.prototype.toString.call(t.template.style[e])){var a=l(o);o.style.setProperty(e,t.template.style[e]({container:o,data:a.data_of_thin}))}else o.style.setProperty(e,i({template:t.template.style[e],container:o}))})}}function i(t){var e=t.template,a=/\[\[[a-zA-Z0-9\.\/_]*\]\]/gi,n=e.replace(a,function(e){for(var a=e.replace("[[","").replace("]]",""),n=a.split("/"),o=l(t.container),i=0;i<n.length;i++)if(".."===n[i]){if(!p(o))return e;o=l(o.parentNode)}else{if(p(o)){if(void 0===o.data_of_thin)return e;o=o.data_of_thin}if(null===o)return null;o=o[n[i]]}return o});return n}function l(t){for(;!t.hasOwnProperty("data_of_thin");){if(null===t.parentNode)return null;t=t.parentNode}return t}function r(t){for(var e=t.path.split("/"),a=l(t.container),n=0;n<e.length;n++)if(".."===e[n]){if(!p(a))return null;a=l(a.parentNode)}else{if(p(a)){if(void 0===a.data_of_thin)return null;a=a.data_of_thin}if(null===a)return null;if(!(e[n]in a))return null;a=a[e[n]]}return a}function p(t){return!(!t||"undefined"==typeof window||t!==window&&!t.nodeType)}"[object Array]"===Object.prototype.toString.call(t.template)?e({container:this[0],template:t.template,data:t.data}):"[object Array]"===Object.prototype.toString.call(t.data)?e({container:this[0],template:t.template,data:t.data}):(this[0].data_of_thin=t.data,e({container:this[0],template:t.template}))}});